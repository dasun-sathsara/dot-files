# TMUX Configuration

# Core settings
set-option -g prefix C-a                         # Set the prefix key to Ctrl-A instead of the default Ctrl-B
unbind-key C-b                                   # Unbind the default prefix key
bind-key C-a send-prefix                         # Ensure that Ctrl-A is sent to other apps if pressed twice
set -g base-index 1                              # Start window numbering at 1 instead of 0
setw -g pane-base-index 1                        # Start pane numbering at 1 instead of 0
set -g mouse on                                  # Enable mouse support (scrolling, selecting panes/windows)
set-option -g default-terminal "screen-256color" # Set the default terminal type to support 256 colors

# Key bindings
bind-key R source-file ~/.tmux.conf \; display-message "tmux.conf reloaded." # Reload tmux config with 'prefix + R'
bind-key : command-prompt                                                    # Enter command mode with 'prefix + :'
bind-key r refresh-client                                                    # Refresh the client with 'prefix + r'
bind-key L clear-history                                                     # Clear scrollback history with 'prefix + L'
bind-key space next-window                                                   # Move to next window with 'prefix + space'
bind-key bspace previous-window                                              # Move to previous window with 'prefix + backspace'
bind-key enter next-layout                                                   # Cycle through layouts with 'prefix + enter'

# Vim-style pane navigation
bind-key v split-window -h -c "#{pane_current_path}" # Split window horizontally, keeping current path
bind-key s split-window -v -c "#{pane_current_path}" # Split window vertically, keeping current path
bind-key h select-pane -L                            # Move to left pane with 'prefix + h'
bind-key j select-pane -D                            # Move to pane below with 'prefix + j'
bind-key k select-pane -U                            # Move to pane above with 'prefix + k'
bind-key l select-pane -R                            # Move to right pane with 'prefix + l'

# Window and pane management
bind-key C-o rotate-window               # Rotate panes in current window with 'prefix + Ctrl-O'
bind-key + select-layout main-horizontal # Switch to main-horizontal layout with 'prefix + +'
bind-key = select-layout main-vertical   # Switch to main-vertical layout with 'prefix + ='
bind-key a last-pane                     # Switch to last active pane with 'prefix + a'
bind-key q display-panes                 # Display pane numbers with 'prefix + q'
bind-key c new-window                    # Create a new window with 'prefix + c'
bind-key t next-window                   # Move to next window with 'prefix + t'
bind-key T previous-window               # Move to previous window with 'prefix + T'

# Copy mode
setw -g mode-keys vi                                                                                 # Use vi-style key bindings in copy mode
bind-key [ copy-mode                                                                                 # Enter copy mode with 'prefix + ['
bind-key ] paste-buffer                                                                              # Paste from clipboard with 'prefix + ]'
bind-key -T copy-mode-vi v send-keys -X begin-selection                                              # Begin selection in copy mode with 'v'
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"     # Yank selection to system clipboard
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" # Copy selection on Enter

# Status bar
set-option -g status-interval 1                       # Update status bar every second
set-option -g status-position top                     # Position the status bar at the top of the screen
set-option -g status-justify left                     # Left-align window list in status bar
set-option -g status-style fg=red                     # Set status bar text color to red
set-option -g status-left ''                          # Clear the left side of the status bar
set-option -g status-left-length 10                   # Set maximum length for left status bar
set-option -g status-right-style 'fg=black bg=yellow' # Style for right side of status bar
set-option -g status-right '%Y-%m-%d %H:%M '          # Show date and time on right side of status bar
set-option -g status-right-length 50                  # Set maximum length for right status bar

# Window status
setw -g window-status-current-style 'fg=black bg=red'            # Style for the current window in status bar
setw -g window-status-current-format ' #I #W #F '                # Format for current window (#I=index, #W=name, #F=flags)
setw -g window-status-style 'fg=red bg=black'                    # Style for other windows in status bar
setw -g window-status-format ' #I #[fg=white]#W #[fg=yellow]#F ' # Format for other windows
setw -g window-status-bell-style 'fg=yellow bg=red bold'         # Style for windows with bell alert

# Pane borders
set-option -g pane-active-border-style fg=black # Set active pane border color
set-option -g pane-border-style fg=black        # Set inactive pane border color

# Activity monitoring
setw -g monitor-activity on # Highlight windows with activity in the status bar
set -g visual-activity on   # Display a message when activity occurs in a window

# Mouse scrolling
bind-key -T root WheelUpPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M" # Enable scrolling with mouse wheel
bind-key -T root WheelDownPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"             # Enable scrolling with mouse wheel

# Performance optimizations
set-option -g repeat-time 0                  # Disable key repeat to improve responsiveness
set-window-option -g display-panes-time 1500 # Set time (in ms) pane numbers are displayed
